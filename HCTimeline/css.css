/* =========================
   styles.css â€” TIMELINE-ONLY (refined)
   - Centers era content as a narrow column
   - Guarantees no overlap between timeline and text
   - Smooth knob movement
   ========================= */

/* ---- Theme / base ---- */
:root{
  --bg:#ffffff; --fg:#111111; --muted:#666666; --line:#e6e6e6; --focus:#000;
  --font:-apple-system, BlinkMacSystemFont, "SF Pro Text", "Segoe UI", Roboto, Helvetica, Arial, system-ui, sans-serif;

  /* Content measure & spacing */
  --measure: 68ch;          /* centered paragraph width */
  --para-gap: 1.05rem;

  /* Timeline spacing controls */
  --timeline-gap: 20px;     /* space between timeline and first <h3> */
  --timeline-clear: 96px;   /* clearance below track for year badge/tick labels */
}

*{box-sizing:border-box}
html,body{
  margin:0;background:var(--bg);color:var(--fg);
  font:16px/1.6 var(--font);
  -webkit-font-smoothing:antialiased;text-rendering:optimizeLegibility;
}
a{color:inherit;text-decoration:underline;text-underline-offset:2px}
a:focus, button:focus{outline:3px solid var(--focus);outline-offset:3px;border-radius:12px}

/* ---- Page shell (timeline-only) ---- */
main#timeline-page{max-width:1200px;margin:0 auto;padding:22px 16px}

/* ---- Era panes container ---- */
.era-card{padding:8px 0 18px}
.era-head{
  display:flex;align-items:center;justify-content:center;
  border-bottom:1px solid var(--line);
  padding:14px 0 0;                 /* top padding for breathing room */
  margin-bottom:6px;                 /* separates rail from viewport margin */
}

/* The sliding viewport & track for the content panes */
.era-viewport{
  position:relative; overflow:hidden; height:auto; transition:height .28s ease;
  margin-top: var(--timeline-gap);   /* ensures no overlap with first heading */
}
.era-track{
  display:grid; grid-template-columns:repeat(var(--count,5),100%);
  will-change:transform; transition:transform .32s cubic-bezier(.2,.7,.2,1);
  touch-action:pan-y;
}

/* ===== Draggable timeline (centered & long) ===== */
.timeline{
  position:relative; user-select:none;
  width:min(1300px, 96vw);                 /* long rail */
  margin:0 auto var(--timeline-clear);     /* centered + room for year badge/labels */
  padding-top:18px;                        /* space above the rail */
}
.timeline .era-banner{
  position:relative; z-index:2; width:max-content; margin:0 auto 12px;
  font-weight:900; padding:4px 12px; background:#fff; border:1px solid var(--line);
  border-radius:12px; box-shadow:0 1px 2px rgba(0,0,0,.04), 0 6px 18px rgba(0,0,0,.06);
}
.timeline .track{
  position:relative;height:6px;background:#eee;border-radius:999px;
  overflow:visible;                        /* knob/ticks not clipped */
  margin-inline:8px;                       /* keep rail from touching edges */
}
.timeline .fill{
  position:absolute;left:0;top:0;height:6px;background:#000;border-radius:999px;width:0%;
  will-change:width;
}

/* Knob: ring + inner black dot (draggable) */
.timeline .thumb{
  position:absolute;top:50%;transform:translate(-50%,-50%);
  width:30px;height:30px;border-radius:50%;
  background:#fff;border:2px solid #000;box-shadow:0 2px 8px rgba(0,0,0,.25);
  cursor:grab; z-index:3;
  transition:left .28s cubic-bezier(.2,.7,.2,1);  /* smooth click-to-jump */
}
.timeline.is-dragging .thumb{transition:none}     /* pure tracking while dragging */
.timeline .thumb:active{cursor:grabbing}
.timeline .thumb::after{
  content:"";position:absolute;top:50%;left:50%;
  width:14px;height:14px;background:#000;border-radius:50%;
  transform:translate(-50%,-50%);
}

/* Year badge below the rail */
.timeline .year-badge{
  position:absolute; top:calc(100% + 12px); left:0; transform:translate(-50%,0);
  background:#fff; border:1px solid var(--line); border-radius:10px; padding:2px 10px;
  font-weight:800; white-space:nowrap; z-index:2; pointer-events:none;
  transition:left .28s cubic-bezier(.2,.7,.2,1);
}
.timeline.is-dragging .year-badge{transition:none}

/* Optional milestone ticks (injected via JS) */
.timeline .tick{
  position:absolute; top:50%; transform:translate(-50%,-50%);
  width:2px; height:16px; background:#222; opacity:.32; border-radius:2px;
}
.timeline .tick.primary{opacity:.6;height:18px}
.timeline .tick:focus-visible{outline:3px solid #000; outline-offset:4px}

/* Also animate the fill width smoothly when jumping (not dragging) */
.timeline .fill{transition:width .28s cubic-bezier(.2,.7,.2,1)}
.timeline.is-dragging .fill{transition:none}

/* ===== Encyclopedia-style centered column ===== */
.era-pane{
  padding:16px 10px 22px;
  overflow:auto;
}
.era-pane > *{
  width: min(100%, var(--measure)) !important;  /* force a centered narrow column */
  max-width: var(--measure);
  margin-left: auto !important;
  margin-right: auto !important;
}
.era-pane > h3{
  font-weight:900;
  font-size:clamp(1.25rem, 1.05rem + .6vw, 1.6rem);
  line-height:1.22;
  margin-block: 0 0.55rem;          /* top margin handled by --timeline-gap */
  text-align:left;
}
.era-pane p{
  font-size:clamp(1rem, .98rem + .2vw, 1.085rem);
  line-height:1.8;
  margin:0 0 var(--para-gap);
  text-align:left;
  hyphens:auto;
  text-wrap:pretty;
}
.era-pane a{text-decoration:underline;text-underline-offset:2px}
.era-pane em{font-style:italic}
.era-pane strong{font-weight:800}

/* Media within column */
.era-pane img, .era-pane figure{
  display:block;max-width:100%;height:auto;margin:.75rem auto var(--para-gap);
}
.era-pane figure figcaption{
  color:var(--muted);font-size:.9rem;margin-top:.35rem;text-align:center;
}

/* ---- Accessibility / motion ---- */
@media (prefers-reduced-motion: reduce){
  .era-viewport, .era-track,
  .timeline .thumb, .timeline .fill, .timeline .year-badge{transition:none}
}
